CONTRACT_TYPE {
	name = SoundingThermo
	group = HistoricalSoundingScience
    sortKey = 990

	// ************************ REQUIREMENTS ************************
	REQUIREMENT	{
		name = CompleteContract
		type = CompleteContract
		contractType = SoundingKarman
		title = Complete @contractType Contract
	}
	
	// ************************ INFORMATION ************************
	title = Suborbital Thermosphere Research
	genericTitle = Suborbital Thermosphere Research
	description = The thermosphere is the layer of Earth's atmosphere controlled by atmospheric tides and solar activity which spans roughly from 120 to 600 km altitude. In this region, atmospheric particles are electrically charged and heated by highly energetic solar radiation. Scientists have never had direct access to the thermosphere before, and are eager to collect atmospheric data. Design, build and launch a scientific sounding rocket that will send scientific instruments and @payload units of meteorological payload to as high an altitude as possible.<br><b>Make sure your rocket contains a thermometer and barometer as we will need science returned. In the case that you have already completed these experiments, you will need to force run them. This can be done by clicking on the science part and then the info button.</b><br>This is a series of six contracts, of which @index have been completed. After the completion of 3 contracts, the spectrometry science campaign will be unlocked.
	genericDescription = Deliver a meteorological payload to a specified altitude.
	synopsis = Launch a sounding rocket with @payload units of meteorological payload as high as you can. So that you may achieve optional goals, this contract will complete only after you reach apogee.
	completedMessage = Congratulations on a successful launch! The rocket has delivered the payload.

	minExpiry = 0
	maxExpiry = 0
	maxCompletions = 4
	maxSimultaneous = 1
	deadline = 240
	
	targetBody = HomeWorld()
	
	prestige = Trivial
	genericReward = @reward * 0.5
	genericAdvance = @reward * 0.5
	
	// ************************ DATA ************************	
	DATA {
		type = float
		index = SoundingThermoIndex
	}
	BEHAVIOUR {
		name = IncrementIndex
		type = Expression
		CONTRACT_COMPLETED_SUCCESS {
				SoundingThermoIndex = SoundingThermoIndex + 1
		}
	}
	DATA {
		type = List<float>
		altitudes = [ 50, 100, 200, 300, 400 ]
		rewards = [ 10, 9, 8, 7, 6, 5 ]
		partialRewards = [ 1, 2, 2, 2, 3 ]
	}
	DATA {
		type = float
		payload = 30
		reward = @rewards.ElementAt(@index)
	}
	
	// ************************ PARAMETERS ************************	
	PARAMETER {
		name = VesselGroup
		type = VesselParameterGroup		
		title = @/synopsis
		PARAMETER {
			name = NewVessel
			type = NewVessel
			title = Launch a New Vessel
			hideChildren = true
		}
		PARAMETER {
			name = HasMetPayload
			type = HasResource
			resource = MetPayload
			minQuantity = @/payload-0.5
			title = Have a MetPayload of at least @/payload units on the craft
			hideChildren = true
		}		
		PARAMETER {
			name = ExperimentRunning
			type = ExperimentRunning
			hideChildren = true
			title = Have a thermometer active
			experiment = temperatureScan
		}
		PARAMETER {
			name = ExperimentRunning2
			type = ExperimentRunning
			hideChildren = true
			title = Have a barometer active
			experiment = barometerScan
		}
		PARAMETER {
			name = ReachAlt
			type = ReachState
			completeInSequence = true
			minAltitude = 25000
			title = Reach an altitude of at least 25 km
			hideChildren = true
		}
		PARAMETER {
			name = ReachAlt
			type = ReachState
			hidden = true
			completeInSequence = true
			maxRateOfClimb = 0
			hideChildren = true
		}
	}
	PARAMETER {
		name = VesselGroup0
		type = VesselParameterGroup		
		title = Reward for reaching @/altitudes.ElementAt(0) km

		rewardFunds = @/rewardFunds * @/partialRewards.ElementAt(0) / @/reward
		rewardReputation = @/rewardReputation * @/partialRewards.ElementAt(0) / @/reward
		rewardScience = 1
		optional = true
		hideChildren = true

		PARAMETER {
			name = NewVessel
			type = NewVessel
			hideChildren = true
		}
		PARAMETER {
			name = HasMetPayload
			type = HasResource
			resource = MetPayload
			minQuantity = @/payload-0.5
			hideChildren = true
		}		
		PARAMETER {
			name = ExperimentRunning
			type = ExperimentRunning
			hideChildren = true
			experiment = temperatureScan
		}
		PARAMETER {
			name = ExperimentRunning2
			type = ExperimentRunning
			hideChildren = true
			experiment = barometerScan
		}
		PARAMETER {
			name = ReachAlt
			type = ReachState
			completeInSequence = true
			minAltitude = @/altitudes.ElementAt(0) * 1000
			hideChildren = true
		}
	}
	PARAMETER {
		name = VesselGroup1
		type = VesselParameterGroup		
		title = Reward for reaching @/altitudes.ElementAt(1) km
		completeInSequence = true

		rewardFunds = @/rewardFunds * @/partialRewards.ElementAt(1) / @/reward
		rewardReputation = @/rewardReputation * @/partialRewards.ElementAt(1) / @/reward
		rewardScience = 1
		optional = true
		hideChildren = true

		PARAMETER {
			name = NewVessel
			type = NewVessel
			hideChildren = true
		}	
		PARAMETER {
			name = HasMetPayload
			type = HasResource
			resource = MetPayload
			minQuantity = @/payload-0.5
			hideChildren = true
		}		
		PARAMETER {
			name = ExperimentRunning
			type = ExperimentRunning
			hideChildren = true
			title = Have a thermometer active
			experiment = temperatureScan
		}
		PARAMETER {
			name = ExperimentRunning2
			type = ExperimentRunning
			hideChildren = true
			experiment = barometerScan
		}
		PARAMETER {
			name = ReachAlt
			type = ReachState
			completeInSequence = true
			minAltitude = @/altitudes.ElementAt(1) * 1000
			hideChildren = true
		}
	}
	PARAMETER {
		name = VesselGroup2
		type = VesselParameterGroup		
		title = Reward for reaching @/altitudes.ElementAt(2) km
		completeInSequence = true

		rewardFunds = @/rewardFunds * @/partialRewards.ElementAt(2) / @/reward
		rewardReputation = @/rewardReputation * @/partialRewards.ElementAt(2) / @/reward
		rewardScience = 1
		optional = true
		hideChildren = true

		PARAMETER {
			name = NewVessel
			type = NewVessel
			hideChildren = true
		}	
		PARAMETER {
			name = HasMetPayload
			type = HasResource
			resource = MetPayload
			minQuantity = @/payload-0.5
			hideChildren = true
		}		
		PARAMETER {
			name = ExperimentRunning
			type = ExperimentRunning
			hideChildren = true
			experiment = temperatureScan
		}
		PARAMETER {
			name = ExperimentRunning2
			type = ExperimentRunning
			hideChildren = true
			experiment = barometerScan
		}
		PARAMETER {
			name = ReachAlt
			type = ReachState
			completeInSequence = true
			minAltitude = @/altitudes.ElementAt(2) * 1000
			hideChildren = true
		}
	}
	PARAMETER {
		name = VesselGroup3
		type = VesselParameterGroup		
		title = Reward for reaching @/altitudes.ElementAt(3) km
		completeInSequence = true

		rewardFunds = @/rewardFunds * @/partialRewards.ElementAt(3) / @/reward
		rewardReputation = @/rewardReputation * @/partialRewards.ElementAt(3) / @/reward
		rewardScience = 1
		optional = true
		hideChildren = true

		PARAMETER {
			name = NewVessel
			type = NewVessel
			hideChildren = true
		}			
		PARAMETER {
			name = HasMetPayload
			type = HasResource
			resource = MetPayload
			minQuantity = @/payload-0.5
			hideChildren = true
		}		
		PARAMETER {
			name = ExperimentRunning
			type = ExperimentRunning
			hideChildren = true
			experiment = temperatureScan
		}
		PARAMETER {
			name = ExperimentRunning2
			type = ExperimentRunning
			hideChildren = true
			experiment = barometerScan
		}
		PARAMETER {
			name = ReachAlt
			type = ReachState
			completeInSequence = true
			minAltitude = @/altitudes.ElementAt(3) * 1000
			hideChildren = true
		}
	}
	PARAMETER {
		name = VesselGroup4
		type = VesselParameterGroup		
		title = Reward for reaching @/altitudes.ElementAt(4) km
		completeInSequence = true

		rewardFunds = @/rewardFunds * @/partialRewards.ElementAt(4) / @/reward
		rewardReputation = @/rewardReputation * @/partialRewards.ElementAt(4) / @/reward
		rewardScience = 1
		optional = true
		hideChildren = true

		PARAMETER {
			name = NewVessel
			type = NewVessel
			hideChildren = true
		}			
		PARAMETER {
			name = HasMetPayload
			type = HasResource
			resource = MetPayload
			minQuantity = @/payload-0.5
			hideChildren = true
		}		
		PARAMETER {
			name = ExperimentRunning
			type = ExperimentRunning
			hideChildren = true
			experiment = temperatureScan
		}
		PARAMETER {
			name = ExperimentRunning2
			type = ExperimentRunning
			hideChildren = true
			experiment = barometerScan
		}
		PARAMETER {
			name = ReachAlt
			type = ReachState
			completeInSequence = true
			minAltitude = @/altitudes.ElementAt(4) * 1000
			hideChildren = true
		}
	}
}